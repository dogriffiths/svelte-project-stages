Iterate through component collections and update arrays
